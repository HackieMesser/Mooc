def add_student(students, name):
    students[name]=[]
    return students
def add_course(students, name, course):
    students[name].append(course)
def print_student(students, name):
    no_courses="no completed courses"
    if name in students:
        if students[name]!=[]:
            num_courses=len(students[name])
            print(f"{name}:")
            print(f" {num_courses} completed courses:")
            cum_gpa=0
            for x in students[name]:
                index=0
                for i in x:
                    if index==0:
                        c_name=i
                    else:
                        grade=i
                    index+=1
                print("  "+c_name+" "+str(grade))
                cum_gpa+=grade
            print(f" average grade {cum_gpa/num_courses}")
        else:
            print(f"{name}:")
            print(" "+no_courses)
    else:
        print(f"{name}: no such person in the database")

    

                
if __name__ == '__main__':
    students = {}
    add_student(students, "Peter")
    add_course(students, "Peter", ("Introduction to Programming", 3))
    add_course(students, "Peter", ("Advanced Course in Programming", 2))
    add_course(students, "Peter", ("Data Structures and Algorithms", 0))
    print_student(students, "Peter")


#still broken
def add_student(students, name):
    students[name]=[]
    return students



def add_course(students, name, course):
    if len(students[name])==0:
        students[name].append(course)
    for i in students[name]:
        if course[0] == i[0] and course[1]>i[1]:
            students[name].pop(i)
            students[name].append(course)
            break
        elif course[1]==0:
            break
        else: 
            students[name].append(course)



def print_student(students, name):
    no_courses="no completed courses"
    if name in students:
        if students[name]!=[]:
            num_courses=len(students[name])
            print(f"{name}:")
            print(f" {num_courses} completed courses:")
            cum_gpa=0
            for x in students[name]:
                index=0
                for i in x:
                    if index==0:
                        c_name=i
                    else:
                        grade=i
                    index+=1
                print("  "+c_name+" "+str(grade))
                cum_gpa+=grade
            print(f" average grade {cum_gpa/num_courses}")
        else:
            print(f"{name}:")
            print(" "+no_courses)
    else:
        print(f"{name}: no such person in the database")
        
if __name__ == '__main__':        
    students = {}
    add_student(students, "Peter")
    add_course(students, "Peter", ("Introduction to Programming", 3))
    add_course(students, "Peter", ("Advanced Course in Programming", 2))
    add_course(students, "Peter", ("Data Structures and Algorithms", 0))
    add_course(students, "Peter", ("Introduction to Programming", 2))
    print_student(students, "Peter")
